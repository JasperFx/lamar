<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Inline Dependencies | Lamar</title>
    <meta name="description" content=".NET Fast Inversion of Control and Dynamic code weaving tools">
    <link rel="stylesheet" href="/lamar/assets/style.5189d035.css">
    <link rel="modulepreload" href="/lamar/assets/Home.a9a40d4a.js">
    <link rel="modulepreload" href="/lamar/assets/AlgoliaSearchBox.f3e27e7a.js">
    <link rel="modulepreload" href="/lamar/assets/app.80913d4a.js">
    <link rel="modulepreload" href="/lamar/assets/guide_ioc_registration_inline-dependencies.md.a1e78f53.lean.js">
    <link rel="modulepreload" href="/lamar/assets/app.80913d4a.js">
    <meta name="twitter:title" content="Inline Dependencies | Lamar">
    <meta property="og:title" content="Inline Dependencies | Lamar">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-7161a24b><div class="sidebar-button" data-v-7161a24b><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/lamar/" aria-label="Lamar, back to home" data-v-7161a24b data-v-4a583abe><!----> Lamar</a><div class="flex-grow" data-v-7161a24b></div><div class="nav" data-v-7161a24b><nav class="nav-links" data-v-7161a24b data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/lamar/guide/" data-v-641633f9>Guide <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/JasperFx/lamar/releases" target="_blank" rel="noopener noreferrer" data-v-641633f9>Release Notes <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://gitter.im/JasperFx/lamar?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank" rel="noopener noreferrer" data-v-641633f9>Gitter | Join Chat <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/JasperFx/lamar" target="_blank" rel="noopener noreferrer" data-v-641633f9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-6b49cdcd><nav class="nav-links nav" data-v-6b49cdcd data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/lamar/guide/" data-v-641633f9>Guide <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/JasperFx/lamar/releases" target="_blank" rel="noopener noreferrer" data-v-641633f9>Release Notes <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://gitter.im/JasperFx/lamar?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank" rel="noopener noreferrer" data-v-641633f9>Gitter | Join Chat <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/JasperFx/lamar" target="_blank" rel="noopener noreferrer" data-v-641633f9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-6b49cdcd><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/">Getting Started</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/">Inversion of Control</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/concepts">Software Design Concepts</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/bootstrapping">Bootstrapping a Container</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/aspnetcore">Integration with ASP.NET Core</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/blazor">Integration with Blazor</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/">Registration</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/registry-dsl">ServiceRegistry DSL</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/lamar/guide/ioc/registration/inline-dependencies">Inline Dependencies</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#event-condition-action-rules">Event Condition Action Rules</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#constructor-parameters-by-type">Constructor Parameters by Type</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#specifying-the-argument-name">Specifying the Argument Name</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setter-dependencies">Setter Dependencies</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#enumerable-dependencies">Enumerable Dependencies</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#programmatic-configuration-outside-of-the-registry-dsl">Programmatic Configuration outside of the Registry DSL</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/auto-registration-and-conventions">Auto-Registration and Conventions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/configured-instance">Working with IConfiguredInstance</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/policies">Policies</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/changing-configuration-at-runtime">Changing Configuration at Runtime</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/constructor-selection">Constructor Selection</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/existing-objects">Registering Existing Objects</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/attributes">Using Attributes for Configuration</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/lifetime">Service Lifetimes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/">Resolving Services</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/get-a-service-by-plugin-type">Get a Service by PluginType</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/get-a-service-by-plugin-type-and-name">Get a Service by Plugin Type and Name</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/get-all-services-by-plugin-type">Get all Services by Plugin Type</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/try-getting-an-optional-service-by-plugin-type">Try Getting an Optional Service by Plugin Type</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/try-getting-an-optional-service-by-plugin-type-and-name">Try Getting an Optional Service by Plugin Type and Name</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/requesting-a-concrete-type">Auto Resolving Concrete Types</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/generics">Generic Types</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/decorators">Decorators</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/">Lamar Diagnostics</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/what-do-i-have">WhatDoIHave()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/validating-container-configuration">Validating Container Configuration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/environment-tests">Environment Tests</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/build-plans">Build Plans</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/using-the-container-model">Using the Container Model</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/type-scanning">Type Scanning Diagnostics</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/auto-wiring">Auto Wiring</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/lambdas">Building Objects with Lambdas</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/injecting-at-runtime">Injecting Services at Runtime</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/disposing">Lamar and IDisposable</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/lazy-resolution">Lazy Resolution</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/nested-containers">Nested Containers (Per Request/Transaction)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/setter-injection">Setter Injection</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/working-with-enumerable-types">Working with Enumerable Types</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/">Compilation</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/assembly-generator">Compiling code with AssemblyGenerator</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/source-writer">Generating code with ISourceWriter</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/">The &quot;Frame&quot; Model</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/variables">Working with Variables</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/frame">Building custom Frames</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/extension-methods">Extension methods for Names in code</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/injected-fields">Injected Fields</a><!----></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="inline-dependencies"><a class="header-anchor" href="#inline-dependencies" aria-hidden="true">#</a> Inline Dependencies</h1><p>While you generally allow Lamar to just use <em>auto-wiring</em> to fill the dependencies of a concrete type, there are times when you may want to explicitly configure individual dependencies on a case by case basis. In the case of <em>primitive</em> types like strings or numbers, Lamar <strong>will not</strong> do any auto-wiring, so it&#39;s incumbent upon you the user to supply the dependency.</p><p>Let&#39;s say we have a simple class called <code>ColorWidget</code> like the following:</p><!-- snippet: sample_inline-dependencies-ColorWidget --><p><a id="snippet-sample_inline-dependencies-colorwidget"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ColorWidget</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IWidget</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">ColorWidget</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> color<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Color <span class="token operator">=</span> color<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Color <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token preprocessor property">#<span class="token directive keyword">region</span> ICloneable Members</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">MemberwiseClone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing.Widget/IWidget.cs#L14-L31" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_inline-dependencies-colorwidget" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><p>To register the <code>ColorWidget</code>, you would supply the value of the <code>color</code> parameter to the constructor function like so:</p><!-- snippet: sample_inline-dependencies-value --><p><a id="snippet-sample_inline-dependencies-value"></a></p><div class="language-cs"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">inline_usage_of_primitive_constructor_argument</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        _<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IWidget<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ColorWidget<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Ctor</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span><span class="token string">&quot;Red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IWidget<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ColorWidget<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token function">ShouldBe</span><span class="token punctuation">(</span><span class="token string">&quot;Red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/Examples/inline_dependencies.cs#L19-L34" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_inline-dependencies-value" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><h2 id="event-condition-action-rules"><a class="header-anchor" href="#event-condition-action-rules" aria-hidden="true">#</a> Event Condition Action Rules</h2><p>The ability to explicitly define dependencies inline isn&#39;t commonly used these days, but was actually one of the very core use cases in the initial versions of Lamar. One of the first usages of Lamar in a production application was in a configurable rules engine using an <a href="http://en.wikipedia.org/wiki/Event_condition_action" target="_blank" rel="noopener noreferrer">Event-Condition-Action</a> architecture where the conditions and actions were configured in Lamar as inline dependencies of <em>Rule</em> objects. Using Lamar&#39;s old Xml configuration, we could define rules for new customers by registering rule objects with the container that reused existing <em>condition</em> and <em>action</em> classes in new configurations.</p><p>To make that concrete and establish a sample problem domain, consider these types:</p><!-- snippet: sample_inline-dependencies-rule-classes --><p><a id="snippet-sample_inline-dependencies-rule-classes"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SomeEvent</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICondition</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">Matches</span><span class="token punctuation">(</span><span class="token class-name">SomeEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAction</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PerformWork</span><span class="token punctuation">(</span><span class="token class-name">SomeEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IEventRule</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ProcessEvent</span><span class="token punctuation">(</span><span class="token class-name">SomeEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/Examples/inline_dependencies.cs#L36-L56" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_inline-dependencies-rule-classes" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><p>Now, let&#39;s move on to seeing how we could use inline dependency configuration to register new rules.</p><h2 id="constructor-parameters-by-type"><a class="header-anchor" href="#constructor-parameters-by-type" aria-hidden="true">#</a> Constructor Parameters by Type</h2><p>First off, let&#39;s say that we have a <code>SimpleRule</code> that takes a single condition and action:</p><!-- snippet: sample_inline-dependencies-SimpleRule --><p><a id="snippet-sample_inline-dependencies-simplerule"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleRule</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IEventRule</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ICondition</span> _condition<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IAction</span> _action<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">SimpleRule</span><span class="token punctuation">(</span><span class="token class-name">ICondition</span> condition<span class="token punctuation">,</span> <span class="token class-name">IAction</span> action<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _condition <span class="token operator">=</span> condition<span class="token punctuation">;</span>
        _action <span class="token operator">=</span> action<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ProcessEvent</span><span class="token punctuation">(</span><span class="token class-name">SomeEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_condition<span class="token punctuation">.</span><span class="token function">Matches</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            _action<span class="token punctuation">.</span><span class="token function">PerformWork</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/Examples/inline_dependencies.cs#L58-L79" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_inline-dependencies-simplerule" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><p>Now, since <code>SimpleRule</code> has only a single dependency on both <code>IAction</code> and <code>ICondition</code>, we can create new rules by registering new Instance&#39;s of <code>SimpleRule</code> with different combinations of its dependencies:</p><!-- snippet: sample_inline-dependencies-simple-ctor-injection --><p><a id="snippet-sample_inline-dependencies-simple-ctor-injection"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InlineCtorArgs</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ServiceRegistry</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">InlineCtorArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Defining args by type</span>
        <span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IEventRule<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SimpleRule<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Ctor</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICondition<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Is</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Condition1<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Ctor</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAction<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Is</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Action1<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Named</span><span class="token punctuation">(</span><span class="token string">&quot;One&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Pass the explicit values for dependencies</span>
        <span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IEventRule<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SimpleRule<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Ctor</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICondition<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Condition2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Ctor</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAction<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Action2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Named</span><span class="token punctuation">(</span><span class="token string">&quot;Two&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Rarely used, but gives you a &quot;do any crazy thing&quot; option</span>
        <span class="token comment">// Pass in your own Instance object</span>
        <span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IEventRule<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SimpleRule<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Ctor</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAction<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">MySpecialActionInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BigCondition</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICondition</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token function">BigCondition</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> number<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">Matches</span><span class="token punctuation">(</span><span class="token class-name">SomeEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotImplementedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySpecialActionInstance</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Instance</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token function">MySpecialActionInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IAction</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IAction</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ServiceLifetime<span class="token punctuation">.</span>Transient<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">Func<span class="token punctuation">&lt;</span>Scope<span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token function">ToResolver</span><span class="token punctuation">(</span><span class="token class-name">Scope</span> topScope<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotImplementedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Resolve</span><span class="token punctuation">(</span><span class="token class-name">Scope</span> scope<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotImplementedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">Variable</span> <span class="token function">CreateVariable</span><span class="token punctuation">(</span><span class="token class-name">BuildMode</span> mode<span class="token punctuation">,</span> <span class="token class-name">ResolverVariables</span> variables<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> isRoot<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotImplementedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/Examples/inline_dependencies.cs#L113-L173" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_inline-dependencies-simple-ctor-injection" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><p>The inline dependency configuration using the <code>Ctor&lt;&gt;().Is()</code> syntax supports all the common Lamar configuration options: define by type, by lambdas, by value, or if you really want to risk severe eye strain, you can use your own Instance objects and define the configuration of your dependency&#39;s dependencies.</p><h2 id="specifying-the-argument-name"><a class="header-anchor" href="#specifying-the-argument-name" aria-hidden="true">#</a> Specifying the Argument Name</h2><p>If for some reason you need to specify an inline constructor argument dependency, and the concrete type has more than one dependency for that type, you just need to specify the parameter name as shown in this sample:</p><!-- snippet: sample_inline-dependencies-ctor-by-name --><p><a id="snippet-sample_inline-dependencies-ctor-by-name"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DualConditionRule</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IEventRule</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ICondition</span> _first<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ICondition</span> _second<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IAction</span> _action<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">DualConditionRule</span><span class="token punctuation">(</span><span class="token class-name">ICondition</span> first<span class="token punctuation">,</span> <span class="token class-name">ICondition</span> second<span class="token punctuation">,</span> <span class="token class-name">IAction</span> action<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _first <span class="token operator">=</span> first<span class="token punctuation">;</span>
        _second <span class="token operator">=</span> second<span class="token punctuation">;</span>
        _action <span class="token operator">=</span> action<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ProcessEvent</span><span class="token punctuation">(</span><span class="token class-name">SomeEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_first<span class="token punctuation">.</span><span class="token function">Matches</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span> <span class="token operator">||</span> _second<span class="token punctuation">.</span><span class="token function">Matches</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            _action<span class="token punctuation">.</span><span class="token function">PerformWork</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DualConditionRuleRegistry</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ServiceRegistry</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">DualConditionRuleRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// In this case, because DualConditionRule</span>
        <span class="token comment">// has two different</span>
        <span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IEventRule<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DualConditionRule<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Ctor</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICondition<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;first&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Is</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Condition1<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Ctor</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICondition<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;second&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Is</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Condition2<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/Examples/inline_dependencies.cs#L175-L210" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_inline-dependencies-ctor-by-name" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><h2 id="setter-dependencies"><a class="header-anchor" href="#setter-dependencies" aria-hidden="true">#</a> Setter Dependencies</h2><p>You can also configure setter dependencies with a similar syntax, but with additional options to specify the property name by using an <code>Expression</code> as shown below:</p><!-- snippet: sample_inline-dependencies-setters --><p><a id="snippet-sample_inline-dependencies-setters"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuleWithSetters</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IEventRule</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ICondition</span> Condition <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IAction</span> Action <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ProcessEvent</span><span class="token punctuation">(</span><span class="token class-name">SomeEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Condition<span class="token punctuation">.</span><span class="token function">Matches</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Action<span class="token punctuation">.</span><span class="token function">PerformWork</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuleWithSettersRegistry</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ServiceRegistry</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">RuleWithSettersRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IEventRule<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RuleWithSetters<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Setter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICondition<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Is</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Condition1<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token comment">// or if you need to specify the property name</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Setter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAction<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;Action&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Is</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Action2<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/Examples/inline_dependencies.cs#L212-L240" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_inline-dependencies-setters" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><div class="tip custom-block"><p class="custom-block-title">INFO</p><p>The <code>Ctor</code> and <code>Setter</code> methods are just syntactic sugar. Both methods store data to the same underlying structure.</p></div><h2 id="enumerable-dependencies"><a class="header-anchor" href="#enumerable-dependencies" aria-hidden="true">#</a> Enumerable Dependencies</h2><p>TODO(show a sample of using enumerable dependencies)</p><h2 id="programmatic-configuration-outside-of-the-registry-dsl"><a class="header-anchor" href="#programmatic-configuration-outside-of-the-registry-dsl" aria-hidden="true">#</a> Programmatic Configuration outside of the Registry DSL</h2><p>In some cases, you may want to skip the Registry DSL and go straight for the raw dependencies structures. Let&#39;s say thatwe&#39;re using an open generic type for our rules engine so that we can respond to multiple event types:</p><!-- snippet: sample_inline-dependencies-open-types --><p><a id="snippet-sample_inline-dependencies-open-types"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IEventRule<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ProcessEvent</span><span class="token punctuation">(</span><span class="token class-name">TEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICondition<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">Matches</span><span class="token punctuation">(</span><span class="token class-name">TEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Condition1<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICondition<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">Matches</span><span class="token punctuation">(</span><span class="token class-name">TEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotImplementedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAction<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PerformWork</span><span class="token punctuation">(</span><span class="token class-name">TEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Action1<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IAction<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PerformWork</span><span class="token punctuation">(</span><span class="token class-name">TEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotImplementedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EventRule<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IEventRule<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">string</span></span> _name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ICondition<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span> _condition<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IAction<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span> _action<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">EventRule</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">,</span> <span class="token class-name">ICondition<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span> condition<span class="token punctuation">,</span> <span class="token class-name">IAction<span class="token punctuation">&lt;</span>TEvent<span class="token punctuation">&gt;</span></span> action<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        _condition <span class="token operator">=</span> condition<span class="token punctuation">;</span>
        _action <span class="token operator">=</span> action<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _name<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ProcessEvent</span><span class="token punctuation">(</span><span class="token class-name">TEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_condition<span class="token punctuation">.</span><span class="token function">Matches</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            _action<span class="token punctuation">.</span><span class="token function">PerformWork</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/Examples/inline_dependencies.cs#L242-L301" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_inline-dependencies-open-types" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><p>It&#39;s frequently useful to explicitly configure all the elements for an enumerable argument (arrays, IEnumerable, or IList). Lamar provides this syntax to do just that:</p><!-- snippet: sample_inline-dependencies-enumerables --><p><a id="snippet-sample_inline-dependencies-enumerables"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BigRule</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IEventRule</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>ICondition<span class="token punctuation">&gt;</span></span> _conditions<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>IAction<span class="token punctuation">&gt;</span></span> _actions<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">BigRule</span><span class="token punctuation">(</span><span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>ICondition<span class="token punctuation">&gt;</span></span> conditions<span class="token punctuation">,</span> <span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>IAction<span class="token punctuation">&gt;</span></span> actions<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _conditions <span class="token operator">=</span> conditions<span class="token punctuation">;</span>
        _actions <span class="token operator">=</span> actions<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ProcessEvent</span><span class="token punctuation">(</span><span class="token class-name">SomeEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_conditions<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">Matches</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            _actions<span class="token punctuation">.</span><span class="token function">Each</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">PerformWork</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/Examples/inline_dependencies.cs#L305-L327" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_inline-dependencies-enumerables" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><a class="link" href="https://github.com/JasperFx/lamar/edit/master/docs/guide/ioc/registration/inline-dependencies.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Suggest changes to this page <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/lamar/guide/ioc/registration/registry-dsl" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>ServiceRegistry DSL</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/lamar/guide/ioc/registration/auto-registration-and-conventions" data-v-38ede35f><span class="text" data-v-38ede35f>Auto-Registration and Conventions</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"fb6cbec9\",\"guide_index.md\":\"f95046d3\",\"guide_compilation_assembly-generator.md\":\"421dc2c7\",\"guide_compilation_index.md\":\"918c1f81\",\"guide_compilation_source-writer.md\":\"7538d9b2\",\"guide_ioc_aspnetcore.md\":\"d2f8897d\",\"guide_ioc_auto-wiring.md\":\"b5043529\",\"guide_ioc_blazor.md\":\"cc1394ef\",\"guide_ioc_bootstrapping.md\":\"6f6bf64e\",\"guide_ioc_concepts.md\":\"7bfcb7b6\",\"guide_ioc_decorators.md\":\"42472b7d\",\"guide_ioc_disposing.md\":\"39669a3e\",\"guide_ioc_generics.md\":\"12ce5087\",\"guide_ioc_index.md\":\"f20896c1\",\"guide_ioc_injecting-at-runtime.md\":\"d04d52f4\",\"guide_ioc_lambdas.md\":\"523bc9a1\",\"guide_ioc_lazy-resolution.md\":\"8a26aa91\",\"guide_ioc_lifetime.md\":\"686834d8\",\"guide_ioc_nested-containers.md\":\"ce2c9e97\",\"guide_ioc_setter-injection.md\":\"280f3b7b\",\"guide_ioc_working-with-enumerable-types.md\":\"50336077\",\"guide_compilation_frames_extension-methods.md\":\"2dd34e6d\",\"guide_compilation_frames_frame.md\":\"81a68e73\",\"guide_compilation_frames_index.md\":\"cb47d5ec\",\"guide_compilation_frames_injected-fields.md\":\"d85c647d\",\"guide_compilation_frames_variables.md\":\"a3e8186f\",\"guide_ioc_diagnostics_build-plans.md\":\"5574be84\",\"guide_ioc_diagnostics_environment-tests.md\":\"5dcff42a\",\"guide_ioc_diagnostics_index.md\":\"920fa058\",\"guide_ioc_diagnostics_type-scanning.md\":\"bf6cba34\",\"guide_ioc_diagnostics_using-the-container-model.md\":\"7da28ab4\",\"guide_ioc_diagnostics_validating-container-configuration.md\":\"3e340446\",\"guide_ioc_diagnostics_what-do-i-have.md\":\"a9114f20\",\"guide_ioc_registration_attributes.md\":\"a46d9507\",\"guide_ioc_registration_auto-registration-and-conventions.md\":\"1bd608b9\",\"guide_ioc_registration_changing-configuration-at-runtime.md\":\"07938011\",\"guide_ioc_registration_configured-instance.md\":\"4065ccda\",\"guide_ioc_registration_constructor-selection.md\":\"5cd2f312\",\"guide_ioc_registration_existing-objects.md\":\"b0e414e7\",\"guide_ioc_registration_index.md\":\"0801b190\",\"guide_ioc_registration_inline-dependencies.md\":\"a1e78f53\",\"guide_ioc_registration_policies.md\":\"bd29870c\",\"guide_ioc_registration_registry-dsl.md\":\"d7af19ae\",\"guide_ioc_resolving_get-a-service-by-plugin-type-and-name.md\":\"02c0ae8d\",\"guide_ioc_resolving_get-a-service-by-plugin-type.md\":\"38afc058\",\"guide_ioc_resolving_get-all-services-by-plugin-type.md\":\"74339327\",\"guide_ioc_resolving_index.md\":\"11b71ccc\",\"guide_ioc_resolving_requesting-a-concrete-type.md\":\"e8356e97\",\"guide_ioc_resolving_try-getting-an-optional-service-by-plugin-type-and-name.md\":\"641b23a2\",\"guide_ioc_resolving_try-getting-an-optional-service-by-plugin-type.md\":\"d2af2d12\"}")</script>
    <script type="module" async src="/lamar/assets/app.80913d4a.js"></script>
  </body>
</html>