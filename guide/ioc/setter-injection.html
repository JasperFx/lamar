<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setter Injection | Lamar</title>
    <meta name="description" content=".NET Fast Inversion of Control and Dynamic code weaving tools">
    <link rel="stylesheet" href="/lamar/assets/style.5189d035.css">
    <link rel="modulepreload" href="/lamar/assets/Home.a9a40d4a.js">
    <link rel="modulepreload" href="/lamar/assets/AlgoliaSearchBox.f3e27e7a.js">
    <link rel="modulepreload" href="/lamar/assets/app.80913d4a.js">
    <link rel="modulepreload" href="/lamar/assets/guide_ioc_setter-injection.md.3fbf89ff.lean.js">
    <link rel="modulepreload" href="/lamar/assets/app.80913d4a.js">
    <meta name="twitter:title" content="Setter Injection | Lamar">
    <meta property="og:title" content="Setter Injection | Lamar">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-7161a24b><div class="sidebar-button" data-v-7161a24b><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/lamar/" aria-label="Lamar, back to home" data-v-7161a24b data-v-4a583abe><!----> Lamar</a><div class="flex-grow" data-v-7161a24b></div><div class="nav" data-v-7161a24b><nav class="nav-links" data-v-7161a24b data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/lamar/guide/" data-v-641633f9>Guide <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/JasperFx/lamar/releases" target="_blank" rel="noopener noreferrer" data-v-641633f9>Release Notes <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://gitter.im/JasperFx/lamar?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank" rel="noopener noreferrer" data-v-641633f9>Gitter | Join Chat <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/JasperFx/lamar" target="_blank" rel="noopener noreferrer" data-v-641633f9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-6b49cdcd><nav class="nav-links nav" data-v-6b49cdcd data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item" href="/lamar/guide/" data-v-641633f9>Guide <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/JasperFx/lamar/releases" target="_blank" rel="noopener noreferrer" data-v-641633f9>Release Notes <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://gitter.im/JasperFx/lamar?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank" rel="noopener noreferrer" data-v-641633f9>Gitter | Join Chat <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-641633f9><a class="item isExternal" href="https://github.com/JasperFx/lamar" target="_blank" rel="noopener noreferrer" data-v-641633f9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-641633f9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-6b49cdcd><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/">Getting Started</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/">Inversion of Control</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/concepts">Software Design Concepts</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/bootstrapping">Bootstrapping a Container</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/aspnetcore">Integration with ASP.NET Core</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/blazor">Integration with Blazor</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/">Registration</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/registry-dsl">ServiceRegistry DSL</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/inline-dependencies">Inline Dependencies</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/auto-registration-and-conventions">Auto-Registration and Conventions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/configured-instance">Working with IConfiguredInstance</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/policies">Policies</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/changing-configuration-at-runtime">Changing Configuration at Runtime</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/constructor-selection">Constructor Selection</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/existing-objects">Registering Existing Objects</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/registration/attributes">Using Attributes for Configuration</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/lifetime">Service Lifetimes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/">Resolving Services</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/get-a-service-by-plugin-type">Get a Service by PluginType</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/get-a-service-by-plugin-type-and-name">Get a Service by Plugin Type and Name</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/get-all-services-by-plugin-type">Get all Services by Plugin Type</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/try-getting-an-optional-service-by-plugin-type">Try Getting an Optional Service by Plugin Type</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/try-getting-an-optional-service-by-plugin-type-and-name">Try Getting an Optional Service by Plugin Type and Name</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/resolving/requesting-a-concrete-type">Auto Resolving Concrete Types</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/generics">Generic Types</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/decorators">Decorators</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/">Lamar Diagnostics</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/what-do-i-have">WhatDoIHave()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/validating-container-configuration">Validating Container Configuration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/environment-tests">Environment Tests</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/build-plans">Build Plans</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/using-the-container-model">Using the Container Model</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/diagnostics/type-scanning">Type Scanning Diagnostics</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/auto-wiring">Auto Wiring</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/lambdas">Building Objects with Lambdas</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/injecting-at-runtime">Injecting Services at Runtime</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/disposing">Lamar and IDisposable</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/lazy-resolution">Lazy Resolution</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/nested-containers">Nested Containers (Per Request/Transaction)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/lamar/guide/ioc/setter-injection">Setter Injection</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#explicit-setter-injection-with-setterproperty-attributes">Explicit Setter Injection with [SetterProperty] Attributes</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#inline-setter-configuration">Inline Setter Configuration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setter-injection-policies">Setter Injection Policies</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/ioc/working-with-enumerable-types">Working with Enumerable Types</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/">Compilation</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/assembly-generator">Compiling code with AssemblyGenerator</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/source-writer">Generating code with ISourceWriter</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/">The &quot;Frame&quot; Model</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/variables">Working with Variables</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/frame">Building custom Frames</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/extension-methods">Extension methods for Names in code</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/lamar/guide/compilation/frames/injected-fields">Injected Fields</a><!----></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="setter-injection"><a class="header-anchor" href="#setter-injection" aria-hidden="true">#</a> Setter Injection</h1><div class="tip custom-block"><p class="custom-block-title">INFO</p><p>In all cases, <em>Setter Injection</em> is an opt-in feature in Lamar that has to be explicitly enabled on a case by case basis.</p></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>All the <em>Setter Injection</em> rules and attributes are ignored at runtime if Lamar does not know how to resolve the property type. If setter injection is not working for you, try to look at the <a href="/guide/ioc/diagnostics/what-do-i-have.html">WhatDoIHave()</a> output and <a href="/guide/ioc/diagnostics/type-scanning.html">type scanning</a>.</p></div><p>Lamar can inject dependencies into public setter properties as part of its construction process using the <em>Setter Injection</em> form of Dependency Injection. However, the Lamar team strongly recommends using constructor injection wherever possible instead of setter injection. That being said, there are few cases where setter injection is probably easier (inheritance hierarchies), not to mention legacy or third party tools that simply cannot support constructor injection <em>cough</em> <a href="http://ASP.Net" target="_blank" rel="noopener noreferrer">ASP.Net</a> <em>cough</em>.</p><p>See this discussion from Martin Fowler on <a href="http://martinfowler.com/articles/injection.html#ConstructorVersusSetterInjection" target="_blank" rel="noopener noreferrer">Constructor vs Setter Injection</a>.</p><p><strong>If you are having any trouble with setter injection in your Lamar usage, make sure you&#39;re familiar with using <a href="/guide/ioc/diagnostics/build-plans.html">build plans</a> to help in troubleshooting</strong></p><h2 id="explicit-setter-injection-with-setterproperty-attributes"><a class="header-anchor" href="#explicit-setter-injection-with-setterproperty-attributes" aria-hidden="true">#</a> Explicit Setter Injection with [SetterProperty] Attributes</h2><p>The simplest conceptual way to force Lamar into making public setters mandatory service dependencies by decorating setter properties with the <code>[SetterProperty]</code> attribute like this example:</p><!-- snippet: sample_setter-injection-with-SetterProperty --><p><a id="snippet-sample_setter-injection-with-setterproperty"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Repository</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Adding the SetterProperty to a setter directs</span>
    <span class="token comment">// Lamar to use this property when</span>
    <span class="token comment">// constructing a Repository instance</span>
    <span class="token punctuation">[</span>SetterProperty<span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IDataProvider</span> Provider <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SetterProperty</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> ShouldCache <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/Examples/SetterExamples.cs#L21-L33" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_setter-injection-with-setterproperty" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><p>Without the <code>[SetterProperty]</code> attributes decorating the setters, Lamar would ignore the <code>Provider</code> and <code>ShouldCache</code> properties when it builds up a <code>Repository</code> object. With the attributes, Lamar will try to build and attach values for the two properties as part of object construction.</p><p>If you were to look at Lamar&#39;s &quot;build plan&quot; for the <code>Repository</code> class, you would see the actual C# code that Lamar compiles to build the concrete objects:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Lamar_Testing_Examples_Repository_repository</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Lamar<span class="token punctuation">.</span>IoC<span class="token punctuation">.</span>Resolvers<span class="token punctuation">.</span>TransientResolver<span class="token punctuation">&lt;</span>Lamar<span class="token punctuation">.</span>Testing<span class="token punctuation">.</span>Examples<span class="token punctuation">.</span>Repository<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> func_repository_bool <span class="token punctuation">{</span><span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span><span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">Lamar<span class="token punctuation">.</span>Testing<span class="token punctuation">.</span>Examples<span class="token punctuation">.</span>Repository</span> <span class="token function">Build</span><span class="token punctuation">(</span><span class="token class-name">Lamar<span class="token punctuation">.</span>IoC<span class="token punctuation">.</span>Scope</span> scope<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> dataProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Lamar<span class="token punctuation">.</span>Testing<span class="token punctuation">.</span>Examples<span class="token punctuation">.</span>DataProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Lamar<span class="token punctuation">.</span>Testing<span class="token punctuation">.</span>Examples<span class="token punctuation">.</span>Repository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Provider <span class="token operator">=</span> dataProvider<span class="token punctuation">,</span> ShouldCache <span class="token operator">=</span> func_repository_bool<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>Alas, like almost every code generation tool in the history of computer science, the resulting code isn&#39;t terribly pretty. You may find it easier to read and parse by copying the code into a real class file and letting your tool of choice (ReSharper or Rider for me) reformat the code and clean up.</p><p>If you intensely dislike runaway attribute usage, that&#39;s okay because there are other ways to enable setter injection in Lamar.</p><h2 id="inline-setter-configuration"><a class="header-anchor" href="#inline-setter-configuration" aria-hidden="true">#</a> Inline Setter Configuration</h2><p>Any setter property not configured with <code>[SetterProperty]</code> or the setter policies in the next section can still be filled by Lamar if an inline dependency is configured matching that setter property as shown in the example below:</p><!-- snippet: sample_inline-dependencies-setters --><p><a id="snippet-sample_inline-dependencies-setters"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuleWithSetters</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IEventRule</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ICondition</span> Condition <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IAction</span> Action <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ProcessEvent</span><span class="token punctuation">(</span><span class="token class-name">SomeEvent</span> @<span class="token keyword">event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Condition<span class="token punctuation">.</span><span class="token function">Matches</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Action<span class="token punctuation">.</span><span class="token function">PerformWork</span><span class="token punctuation">(</span>@<span class="token keyword">event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuleWithSettersRegistry</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ServiceRegistry</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">RuleWithSettersRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IEventRule<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RuleWithSetters<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Setter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICondition<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Is</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Condition1<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token comment">// or if you need to specify the property name</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Setter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAction<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;Action&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Is</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Action2<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/Examples/inline_dependencies.cs#L212-L240" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_inline-dependencies-setters" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><p>See also: <a href="/guide/ioc/registration/inline-dependencies.html">Inline Dependencies</a></p><h2 id="setter-injection-policies"><a class="header-anchor" href="#setter-injection-policies" aria-hidden="true">#</a> Setter Injection Policies</h2><p>Lastly, you can give Lamar some criteria for determining which setters should be mandatory dependencies with the <code>Registry.Policies.SetAllProperties()</code> method during Container setup as shown in this example below:</p><!-- snippet: sample_using-setter-policy --><p><a id="snippet-sample_using-setter-policy"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassWithNamedProperties</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IGateway</span> Gateway <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IService</span> Service <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">specify_setter_policy_and_construct_an_object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> theService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ColorService</span><span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span>theService<span class="token punctuation">)</span><span class="token punctuation">;</span>
        x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IGateway<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Use</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DefaultGateway<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ForConcreteType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ClassWithNamedProperties<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Configure<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Setter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        x<span class="token punctuation">.</span>Policies<span class="token punctuation">.</span><span class="token function">SetAllProperties</span><span class="token punctuation">(</span>
            policy <span class="token operator">=&gt;</span> policy<span class="token punctuation">.</span><span class="token function">WithAnyTypeFromNamespace</span><span class="token punctuation">(</span><span class="token string">&quot;StructureMap.Testing.Widget3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> description <span class="token operator">=</span> container<span class="token punctuation">.</span>Model<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ClassWithNamedProperties<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Default<span class="token punctuation">.</span><span class="token function">DescribeBuildPlan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> target <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ClassWithNamedProperties<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    target<span class="token punctuation">.</span>Service<span class="token punctuation">.</span><span class="token function">ShouldBeSameAs</span><span class="token punctuation">(</span>theService<span class="token punctuation">)</span><span class="token punctuation">;</span>
    target<span class="token punctuation">.</span>Gateway<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DefaultGateway<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/IoC/Acceptance/setter_injection.cs#L277-L311" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_using-setter-policy" title="Start of snippet">anchor</a></sup><!-- endSnippet --></p><p>All calls to <code>Registry.Policies.SetAllProperties()</code> are additive, meaning you can use as many criteria as possible for setter injection.</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><a class="link" href="https://github.com/JasperFx/lamar/edit/master/docs/guide/ioc/setter-injection.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Suggest changes to this page <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/lamar/guide/ioc/nested-containers" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Nested Containers (Per Request/Transaction)</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/lamar/guide/ioc/working-with-enumerable-types" data-v-38ede35f><span class="text" data-v-38ede35f>Working with Enumerable Types</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"09eb3057\",\"guide_index.md\":\"e0f0cc1c\",\"guide_compilation_assembly-generator.md\":\"f7ea27b8\",\"guide_compilation_index.md\":\"98edc4ea\",\"guide_compilation_source-writer.md\":\"5c84fe4f\",\"guide_ioc_aspnetcore.md\":\"26205e8c\",\"guide_ioc_auto-wiring.md\":\"697eb6eb\",\"guide_ioc_blazor.md\":\"4b724a79\",\"guide_ioc_bootstrapping.md\":\"aa9d1a25\",\"guide_ioc_concepts.md\":\"016f2eba\",\"guide_ioc_decorators.md\":\"d4efb6cd\",\"guide_ioc_disposing.md\":\"ac8c0ba8\",\"guide_ioc_generics.md\":\"cbf8ceb9\",\"guide_ioc_index.md\":\"309a588e\",\"guide_ioc_injecting-at-runtime.md\":\"dc7d83d9\",\"guide_ioc_lambdas.md\":\"e6526ccb\",\"guide_ioc_lazy-resolution.md\":\"bb9ed34c\",\"guide_ioc_lifetime.md\":\"b33e34b3\",\"guide_ioc_nested-containers.md\":\"341524b4\",\"guide_ioc_setter-injection.md\":\"3fbf89ff\",\"guide_ioc_working-with-enumerable-types.md\":\"b13cbece\",\"guide_compilation_frames_extension-methods.md\":\"6d05142c\",\"guide_compilation_frames_frame.md\":\"a9228ffe\",\"guide_compilation_frames_index.md\":\"3fb49576\",\"guide_compilation_frames_injected-fields.md\":\"0ea4d450\",\"guide_compilation_frames_variables.md\":\"04f6f915\",\"guide_ioc_diagnostics_build-plans.md\":\"250bdff1\",\"guide_ioc_diagnostics_environment-tests.md\":\"e1027576\",\"guide_ioc_diagnostics_index.md\":\"8f826691\",\"guide_ioc_diagnostics_type-scanning.md\":\"3f67ff16\",\"guide_ioc_diagnostics_using-the-container-model.md\":\"ddb7151f\",\"guide_ioc_diagnostics_validating-container-configuration.md\":\"7d347cd2\",\"guide_ioc_diagnostics_what-do-i-have.md\":\"402491eb\",\"guide_ioc_registration_attributes.md\":\"9e65b5b3\",\"guide_ioc_registration_auto-registration-and-conventions.md\":\"2a16687a\",\"guide_ioc_registration_changing-configuration-at-runtime.md\":\"4ac65001\",\"guide_ioc_registration_configured-instance.md\":\"3e4f8627\",\"guide_ioc_registration_constructor-selection.md\":\"03dbb9a0\",\"guide_ioc_registration_existing-objects.md\":\"f92a2534\",\"guide_ioc_registration_index.md\":\"d6338306\",\"guide_ioc_registration_inline-dependencies.md\":\"edd21fe1\",\"guide_ioc_registration_policies.md\":\"9605c602\",\"guide_ioc_registration_registry-dsl.md\":\"915a9fd0\",\"guide_ioc_resolving_get-a-service-by-plugin-type-and-name.md\":\"2c47a1fb\",\"guide_ioc_resolving_get-a-service-by-plugin-type.md\":\"d9644569\",\"guide_ioc_resolving_get-all-services-by-plugin-type.md\":\"91d00ec1\",\"guide_ioc_resolving_index.md\":\"5d1623c4\",\"guide_ioc_resolving_requesting-a-concrete-type.md\":\"25f50bfb\",\"guide_ioc_resolving_try-getting-an-optional-service-by-plugin-type-and-name.md\":\"52cf539c\",\"guide_ioc_resolving_try-getting-an-optional-service-by-plugin-type.md\":\"511cccad\"}")</script>
    <script type="module" async src="/lamar/assets/app.80913d4a.js"></script>
  </body>
</html>