import{o as n,c as s,a,b as t}from"./app.80913d4a.js";const p='{"title":"Auto-Registration and Conventions","description":"","frontmatter":{},"headers":[{"level":2,"title":"ServiceRegistry.Scan()","slug":"serviceregistry-scan"},{"level":2,"title":"Scan the Calling Assembly","slug":"scan-the-calling-assembly"},{"level":2,"title":"Search for Assemblies on the File System","slug":"search-for-assemblies-on-the-file-system"},{"level":2,"title":"Excluding Types","slug":"excluding-types"},{"level":2,"title":"Custom Registration Conventions","slug":"custom-registration-conventions"},{"level":2,"title":"The Default ISomething/Something Convention","slug":"the-default-isomething-something-convention"},{"level":2,"title":"Registering the Single Implementation of an Interface","slug":"registering-the-single-implementation-of-an-interface"},{"level":2,"title":"Register all Concrete Types of an Interface","slug":"register-all-concrete-types-of-an-interface"},{"level":2,"title":"Generic Types","slug":"generic-types"},{"level":2,"title":"Register Concrete Types against the First Interface","slug":"register-concrete-types-against-the-first-interface"},{"level":2,"title":"Look for Registries","slug":"look-for-registries"}],"relativePath":"guide/ioc/registration/auto-registration-and-conventions.md","lastUpdated":1629293772509}',e={},o=t('<h1 id="auto-registration-and-conventions"><a class="header-anchor" href="#auto-registration-and-conventions" aria-hidden="true">#</a> Auto-Registration and Conventions</h1><p>Lamar has rich support for registering types by scanning assemblies and applying conventional registrations. Between scanning and default conventions, configurations are often just a few lines.</p><p>Also see <a href="/guide/ioc/diagnostics/type-scanning.html">type scanning diagnostics</a> for help in understanding the assembly scanning behavior in your system.</p><h2 id="serviceregistry-scan"><a class="header-anchor" href="#serviceregistry-scan" aria-hidden="true">#</a> ServiceRegistry.Scan()</h2><p>Assembly scanning operations are defined by the <code>ServiceRegistry.Scan()</code> method demonstrated below:</p>',5),c=t('<p><a id="snippet-sample_basicscanning"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BasicScanning</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ServiceRegistry</span></span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">BasicScanning</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token function">Scan</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>\n        <span class="token punctuation">{</span>\n            <span class="token comment">// Declare which assemblies to scan</span>\n            _<span class="token punctuation">.</span><span class="token function">Assembly</span><span class="token punctuation">(</span><span class="token string">&quot;Lamar.Testing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            _<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AssemblyContainingType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IWidget<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token comment">// Filter types</span>\n            _<span class="token punctuation">.</span><span class="token function">Exclude</span><span class="token punctuation">(</span>type <span class="token operator">=&gt;</span> type<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span><span class="token string">&quot;Bad&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token comment">// A custom registration convention</span>\n            _<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Convention</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MySpecialRegistrationConvention<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token comment">// Built in registration conventions</span>\n            _<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddAllTypesOf</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IWidget<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NameBy</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span><span class="token string">&quot;Widget&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            _<span class="token punctuation">.</span><span class="token function">WithDefaultConventions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/Examples/SetterExamples.cs#L135-L158" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_basicscanning" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><p>Please note (because I&#39;ve been asked this several times over the years) that each call to <code>ServiceRegistry.Scan()</code> is an entirely atomic operation that has no impact on previous or subsequent calls.</p><p>Any given call to <code>ServiceRegistry.Scan()</code> consists of three different things:</p><ol><li>One or more assemblies to scan for types</li><li>One or more registration conventions</li><li>Optionally, set filters to only include certain types or exclude other types from being processed by the scanning operation</li></ol><h2 id="scan-the-calling-assembly"><a class="header-anchor" href="#scan-the-calling-assembly" aria-hidden="true">#</a> Scan the Calling Assembly</h2><div class="tip custom-block"><p class="custom-block-title">INFO</p><p>If you are having any issues with the type scanning using the <code>TheCallingAssembly()</code> method, just replace that call with an explicit <code>Assembly(&quot;assembly name&quot;)</code> or <code>AssemblyContainingType&lt;T&gt;()</code> call instead of relying on Lamar to walk up the call stack to determine the entry assembly.</p></div><p>One of the easiest ways to register types is by scanning the assembly your registry is placed in.</p><p><strong>Note</strong> if you have other registries, Lamar will not automatically find them.</p>',10),l=t('<p><a id="snippet-sample_scan-calling-assembly"></a></p><div class="language-cs"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">scan_but_ignore_registries_by_default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> x<span class="token punctuation">.</span><span class="token function">TheCallingAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    TestingRegistry<span class="token punctuation">.</span>WasUsed<span class="token punctuation">.</span><span class="token function">ShouldBeFalse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/Graph/AssemblyScannerTester.cs#L190-L199" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_scan-calling-assembly" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><h2 id="search-for-assemblies-on-the-file-system"><a class="header-anchor" href="#search-for-assemblies-on-the-file-system" aria-hidden="true">#</a> Search for Assemblies on the File System</h2><p>Lamar provides facilities for registering types by finding assemblies in the application bin path:</p>',5),i=t('<p><a id="snippet-sample_scan-filesystem"></a></p><div class="language-cs"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">scan_all_assemblies_in_a_folder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">AssembliesFromPath</span><span class="token punctuation">(</span>assemblyScanningFolder<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldHaveFamilyWithSameName</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IInterfaceInWidget5<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldHaveFamilyWithSameName</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IWorker<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldNotHaveFamilyWithSameName</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDefinedInExe<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">scan_all_assemblies_in_application_base_directory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">AssembliesFromApplicationBaseDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldHaveFamilyWithSameName</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IInterfaceInWidget5<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldHaveFamilyWithSameName</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IWorker<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldNotHaveFamilyWithSameName</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDefinedInExe<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/Graph/AssemblyScannerTester.cs#L145-L164" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_scan-filesystem" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><p>Do note that Lamar 4.0 does not search for <code>.exe</code> files in the assembly search. The Lamar team felt this was problematic and &quot;nobody would ever actually want to do that.&quot; We were wrong, and due to many user requests, you can now <strong>opt in</strong> to scanning <code>.exe</code> files with a new public method on <code>AssemblyScanner</code> shown below:</p>',4),u=t('<p><a id="snippet-sample_scan-filesystem-for-exe"></a></p><div class="language-cs"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">scan_all_assemblies_in_a_folder_including_exe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">AssembliesAndExecutablesFromPath</span><span class="token punctuation">(</span>assemblyScanningFolder<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token generic-method"><span class="token function">shouldHaveFamilyWithSameName</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IInterfaceInWidget5<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldHaveFamilyWithSameName</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IWorker<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldHaveFamilyWithSameName</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDefinedInExe<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">scan_all_assemblies_in_application_base_directory_including_exe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">AssembliesAndExecutablesFromApplicationBaseDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token generic-method"><span class="token function">shouldHaveFamilyWithSameName</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IInterfaceInWidget5<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldHaveFamilyWithSameName</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IWorker<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldHaveFamilyWithSameName</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDefinedInExe<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/Graph/AssemblyScannerTester.cs#L166-L188" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_scan-filesystem-for-exe" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><p>Do be aware that while this technique is very powerful for extensibility, it&#39;s been extremely problematic for some folks in the past. The Lamar team&#39;s recommendation for using this feature is to:</p><ol><li>Make sure you have some kind of filter on the assemblies scanned for performance and predictability reasons. Either a naming convention or filter by an assembly attribute to narrow where Lamar looks</li><li>Get familiar with the new <a href="/guide/ioc/diagnostics/type-scanning.html">type scanning diagnostics</a> introduced in 4.0;-)</li></ol><p>Behind the scenes, Lamar is using the <code>Assembly.GetExportedTypes()</code> method from the .Net CLR to find types and this mechanism is <strong>very</strong> sensitive to missing dependencies. Again, thanks to the new <a href="/guide/ioc/diagnostics/type-scanning.html">type scanning diagnostics</a>, you now have some visibility into assembly loading failures that used to be silently swallowed internally.</p><h2 id="excluding-types"><a class="header-anchor" href="#excluding-types" aria-hidden="true">#</a> Excluding Types</h2><p>Lamar also makes it easy to exclude types, either individually or by namespace. The following examples also show how Lamar can register an assembly by providing a type within that assembly.</p><p>Excluding additional types or namespaces is as easy as calling the corresponding method again.</p>',9),k=t('<p><a id="snippet-sample_scan-exclusions"></a></p><div class="language-cs"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">use_a_single_exclude_of_type</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AssemblyContainingType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITypeThatHasAttributeButIsNotInRegistry<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ExcludeType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITypeThatHasAttributeButIsNotInRegistry<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token generic-method"><span class="token function">shouldHaveFamily</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IInterfaceInWidget5<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldNotHaveFamily</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITypeThatHasAttributeButIsNotInRegistry<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">use_a_single_exclude2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AssemblyContainingType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITypeThatHasAttributeButIsNotInRegistry<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        x<span class="token punctuation">.</span><span class="token function">ExcludeNamespace</span><span class="token punctuation">(</span><span class="token string">&quot;StructureMap.Testing.Widget5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token generic-method"><span class="token function">shouldNotHaveFamily</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IInterfaceInWidget5<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldNotHaveFamily</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITypeThatHasAttributeButIsNotInRegistry<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">use_a_single_exclude3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AssemblyContainingType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITypeThatHasAttributeButIsNotInRegistry<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ExcludeNamespaceContainingType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITypeThatHasAttributeButIsNotInRegistry<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token generic-method"><span class="token function">shouldNotHaveFamily</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IInterfaceInWidget5<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token generic-method"><span class="token function">shouldNotHaveFamily</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITypeThatHasAttributeButIsNotInRegistry<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/Graph/AssemblyScannerTester.cs#L285-L325" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_scan-exclusions" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><p>You can also ignore specific types through an attribute:</p>',4),r=t('<p><a id="snippet-sample_using-lamarignore"></a></p><div class="language-cs"><pre><code><span class="token comment">// This attribute causes the type scanning to ignore this type</span>\n<span class="token punctuation">[</span>LamarIgnore<span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BiHolder</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IBiHolder</span></span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token function">BiHolder</span><span class="token punctuation">(</span><span class="token class-name">IBiGrandparent</span> grandparent<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/IoC/Acceptance/do_not_blow_up_with_bi_directional_dependencies.cs#L69-L78" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_using-lamarignore" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><h2 id="custom-registration-conventions"><a class="header-anchor" href="#custom-registration-conventions" aria-hidden="true">#</a> Custom Registration Conventions</h2><p>It&#39;s just not possible (or desirable) for Lamar to include every possible type of auto registration convention users might want, but that&#39;s okay because Lamar allows you to create and use your own conventions through the <code>IRegistrationConvention</code> interface:</p>',5),m=t('<p><a id="snippet-sample_iregistrationconvention"></a></p><div class="language-cs"><pre><code><span class="token comment">/// &lt;summary&gt;</span>\n<span class="token comment">///     Used to create custom type scanning conventions</span>\n<span class="token comment">/// &lt;/summary&gt;</span>\n<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IRegistrationConvention</span>\n<span class="token punctuation">{</span>\n    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ScanTypes</span><span class="token punctuation">(</span><span class="token class-name">TypeSet</span> types<span class="token punctuation">,</span> <span class="token class-name">ServiceRegistry</span> services<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar/Scanning/Conventions/IRegistrationConvention.cs#L5-L14" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_iregistrationconvention" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><p>Let&#39;s say that you&#39;d like a custom convention that just registers a concrete type against all the interfaces that it implements. You could then build a custom <code>IRegistrationConvention</code> class like the following example:</p>',4),d=t('<p><a id="snippet-sample_custom-registration-convention"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFoo</span>\n<span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IBar</span>\n<span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IBaz</span>\n<span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BusyGuy</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IFoo</span><span class="token punctuation">,</span> <span class="token class-name">IBar</span><span class="token punctuation">,</span> <span class="token class-name">IBaz</span></span>\n<span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// Custom IRegistrationConvention</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AllInterfacesConvention</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IRegistrationConvention</span></span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ScanTypes</span><span class="token punctuation">(</span><span class="token class-name">TypeSet</span> types<span class="token punctuation">,</span> <span class="token class-name">ServiceRegistry</span> services<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token comment">// Only work on concrete types</span>\n        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> type <span class="token keyword">in</span> types<span class="token punctuation">.</span><span class="token function">FindTypes</span><span class="token punctuation">(</span>TypeClassification<span class="token punctuation">.</span>Concretes <span class="token operator">|</span> TypeClassification<span class="token punctuation">.</span>Closed<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Name <span class="token operator">==</span> <span class="token string">&quot;BusyGuy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token comment">// Register against all the interfaces implemented</span>\n            <span class="token comment">// by this concrete class</span>\n\n            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token keyword">var</span> @<span class="token keyword">interface</span> <span class="token class-name"><span class="token keyword">in</span></span> type<span class="token punctuation">.</span><span class="token function">GetInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n            <span class="token punctuation">{</span>\n                services<span class="token punctuation">.</span><span class="token function">AddTransient</span><span class="token punctuation">(</span>@<span class="token keyword">interface</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token punctuation">}</span>\n            \n        <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n<span class="token punctuation">}</span>\n\n<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">use_custom_registration_convention</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n        <span class="token punctuation">{</span>\n            <span class="token comment">// You&#39;re probably going to want to tightly filter</span>\n            <span class="token comment">// the Type&#39;s that are applicable to avoid unwanted</span>\n            <span class="token comment">// registrations</span>\n            x<span class="token punctuation">.</span><span class="token function">TheCallingAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">IncludeNamespaceContainingType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>BusyGuy<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token comment">// Register the custom policy</span>\n            x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Convention</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AllInterfacesConvention<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFoo<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>BusyGuy<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IBar<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>BusyGuy<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IBaz<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>BusyGuy<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/IoC/Acceptance/custom_registration_convention.cs#L14-L76" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_custom-registration-convention" title="Start of snippet">anchor</a></sup><a id="snippet-sample_custom-registration-convention-1"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFoo</span>\n<span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IBar</span>\n<span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IBaz</span>\n<span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BusyGuy</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IFoo</span><span class="token punctuation">,</span> <span class="token class-name">IBar</span><span class="token punctuation">,</span> <span class="token class-name">IBaz</span></span>\n<span class="token punctuation">{</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// Custom IRegistrationConvention</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AllInterfacesConvention</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IRegistrationConvention</span></span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ScanTypes</span><span class="token punctuation">(</span><span class="token class-name">TypeSet</span> types<span class="token punctuation">,</span> <span class="token class-name">Registry</span> registry<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token comment">// Only work on concrete types</span>\n        types<span class="token punctuation">.</span><span class="token function">FindTypes</span><span class="token punctuation">(</span>TypeClassification<span class="token punctuation">.</span>Concretes <span class="token operator">|</span> TypeClassification<span class="token punctuation">.</span>Closed<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Each</span><span class="token punctuation">(</span>type <span class="token operator">=&gt;</span>\n        <span class="token punctuation">{</span>\n            <span class="token comment">// Register against all the interfaces implemented</span>\n            <span class="token comment">// by this concrete class</span>\n            type<span class="token punctuation">.</span><span class="token function">GetInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Each</span><span class="token punctuation">(</span>@<span class="token keyword">interface</span> <span class="token operator">=&gt;</span> registry<span class="token punctuation">.</span><span class="token function">For</span><span class="token punctuation">(</span>@<span class="token keyword">interface</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">use_custom_registration_convention</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n        <span class="token punctuation">{</span>\n            <span class="token comment">// You&#39;re probably going to want to tightly filter</span>\n            <span class="token comment">// the Type&#39;s that are applicable to avoid unwanted</span>\n            <span class="token comment">// registrations</span>\n            x<span class="token punctuation">.</span><span class="token function">TheCallingAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">IncludeNamespaceContainingType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>BusyGuy<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token comment">// Register the custom policy</span>\n            x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Convention</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AllInterfacesConvention<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFoo<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>BusyGuy<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IBar<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>BusyGuy<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IBaz<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>BusyGuy<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/Acceptance/custom_registration_convention.cs#L13-L68" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_custom-registration-convention-1" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><h2 id="the-default-isomething-something-convention"><a class="header-anchor" href="#the-default-isomething-something-convention" aria-hidden="true">#</a> The Default ISomething/Something Convention</h2><p><em>The Lamar team contains some VB6 veterans who hate Hungarian Notation, but can&#39;t shake the &quot;I&quot; nomenclature.</em></p><p>The &quot;default&quot; convention simply tries to connect concrete classes to interfaces using the I[Something]/[Something] naming convention as shown in this sample:</p>',8),g=t('<p><a id="snippet-sample_withdefaultconventions"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISpaceship</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Spaceship</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ISpaceship</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IRocket</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IRocket</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">default_scanning_in_action</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n        <span class="token punctuation">{</span>\n            x<span class="token punctuation">.</span><span class="token function">Assembly</span><span class="token punctuation">(</span><span class="token string">&quot;Lamar.Testing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            x<span class="token punctuation">.</span><span class="token function">WithDefaultConventions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ISpaceship<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Spaceship<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRocket<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rocket<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/IoC/Acceptance/scanning_samples.cs#L11-L36" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_withdefaultconventions" title="Start of snippet">anchor</a></sup><a id="snippet-sample_withdefaultconventions-1"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISpaceship</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Spaceship</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ISpaceship</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IRocket</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rocket</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IRocket</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">default_scanning_in_action</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n        <span class="token punctuation">{</span>\n            x<span class="token punctuation">.</span><span class="token function">Assembly</span><span class="token punctuation">(</span><span class="token string">&quot;StructureMap.Testing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            x<span class="token punctuation">.</span><span class="token function">WithDefaultConventions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ISpaceship<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Spaceship<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRocket<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rocket<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/Acceptance/scanning_samples.cs#L12-L37" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_withdefaultconventions-1" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><p>By default, the behavior is to add new registrations regardless of the existing state of the existing <code>ServiceRegistry</code>. In cases where you use a mix of explicit and conventional registrations, or other cases where you use multiple <code>Scan()</code> operations, you can control the additive registration behavior as shown below:</p>',6),y=t('<p><a id="snippet-sample_withdefaultconventionsoptions"></a></p><div class="language-cs"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>\n<span class="token punctuation">{</span>\n    _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        x<span class="token punctuation">.</span><span class="token function">Assembly</span><span class="token punctuation">(</span><span class="token string">&quot;Lamar.Testing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        \n        <span class="token comment">// This is the default, add all discovered registrations</span>\n        <span class="token comment">// regardless of existing registrations</span>\n        x<span class="token punctuation">.</span><span class="token function">WithDefaultConventions</span><span class="token punctuation">(</span>OverwriteBehavior<span class="token punctuation">.</span>Always<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        \n        <span class="token comment">// Do not add any registrations if the *ServiceType*</span>\n        <span class="token comment">// is already registered. This will prevent the scanning</span>\n        <span class="token comment">// from overwriting existing default registrations</span>\n        x<span class="token punctuation">.</span><span class="token function">WithDefaultConventions</span><span class="token punctuation">(</span>OverwriteBehavior<span class="token punctuation">.</span>Never<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        \n        <span class="token comment">// Only add new ImplementationType registrations for </span>\n        <span class="token comment">// the ServiceType. This will prevent duplicate concrete</span>\n        <span class="token comment">// types for the same ServiceType being registered by the</span>\n        <span class="token comment">// type scanning</span>\n        x<span class="token punctuation">.</span><span class="token function">WithDefaultConventions</span><span class="token punctuation">(</span>OverwriteBehavior<span class="token punctuation">.</span>NewType<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/IoC/Acceptance/scanning_samples.cs#L41-L64" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_withdefaultconventionsoptions" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><div class="tip custom-block"><p class="custom-block-title">INFO</p><p>The service lifetime override behavior was added in Lamar v4.1</p></div><p>Lastly, you can change the default <code>Lifetime</code> of the discovered registrations like this:</p>',5),h=t('<p><a id="snippet-sample_withdefaultconventionslifetime"></a></p><div class="language-cs"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>\n<span class="token punctuation">{</span>\n    _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        x<span class="token punctuation">.</span><span class="token function">Assembly</span><span class="token punctuation">(</span><span class="token string">&quot;Lamar.Testing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        \n        <span class="token comment">// Use Scoped as the lifetime</span>\n        x<span class="token punctuation">.</span><span class="token function">WithDefaultConventions</span><span class="token punctuation">(</span>ServiceLifetime<span class="token punctuation">.</span>Scoped<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        \n        <span class="token comment">// Mix and match with override behavior</span>\n        x<span class="token punctuation">.</span><span class="token function">WithDefaultConventions</span><span class="token punctuation">(</span>OverwriteBehavior<span class="token punctuation">.</span>Never<span class="token punctuation">,</span> ServiceLifetime<span class="token punctuation">.</span>Singleton<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/IoC/Acceptance/scanning_samples.cs#L71-L85" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_withdefaultconventionslifetime" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><p>Otherwise, the default registration will be <code>Lifetime.Transient</code>.</p><h2 id="registering-the-single-implementation-of-an-interface"><a class="header-anchor" href="#registering-the-single-implementation-of-an-interface" aria-hidden="true">#</a> Registering the Single Implementation of an Interface</h2><p>To tell Lamar to automatically register any interface that only has one concrete implementation, use this method:</p>',6),f=t('<p><a id="snippet-sample_singleimplementationsofinterface"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISong</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TheOnlySong</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ISong</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">only_implementation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n        <span class="token punctuation">{</span>\n            x<span class="token punctuation">.</span><span class="token function">TheCallingAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            x<span class="token punctuation">.</span><span class="token function">SingleImplementationsOfInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ISong<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TheOnlySong<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/IoC/Acceptance/scanning_samples.cs#L127-L148" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_singleimplementationsofinterface" title="Start of snippet">anchor</a></sup><a id="snippet-sample_singleimplementationsofinterface-1"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISong</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TheOnlySong</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ISong</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">only_implementation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n        <span class="token punctuation">{</span>\n            x<span class="token punctuation">.</span><span class="token function">TheCallingAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            x<span class="token punctuation">.</span><span class="token function">SingleImplementationsOfInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ISong<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TheOnlySong<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/Acceptance/scanning_samples.cs#L74-L95" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_singleimplementationsofinterface-1" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><h2 id="register-all-concrete-types-of-an-interface"><a class="header-anchor" href="#register-all-concrete-types-of-an-interface" aria-hidden="true">#</a> Register all Concrete Types of an Interface</h2><p>To add all concrete types that can be cast to a named plugin type, use this syntax:</p>',7),_=t('<p><a id="snippet-sample_register-all-types-implementing"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFantasySeries</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WheelOfTime</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IFantasySeries</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameOfThrones</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IFantasySeries</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BlackCompany</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IFantasySeries</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">register_all_types_of_an_interface</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n        <span class="token punctuation">{</span>\n            x<span class="token punctuation">.</span><span class="token function">TheCallingAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddAllTypesOf</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFantasySeries<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n                <span class="token punctuation">.</span><span class="token function">NameBy</span><span class="token punctuation">(</span>type <span class="token operator">=&gt;</span> type<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token comment">// or</span>\n\n            x<span class="token punctuation">.</span><span class="token function">AddAllTypesOf</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IFantasySeries</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n                <span class="token punctuation">.</span><span class="token function">NameBy</span><span class="token punctuation">(</span>type <span class="token operator">=&gt;</span> type<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    container<span class="token punctuation">.</span>Model<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFantasySeries<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span>Instances<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>ImplementationType<span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">OrderBy</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">ShouldHaveTheSameElementsAs</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">BlackCompany</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">GameOfThrones</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">WheelOfTime</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetInstance</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFantasySeries<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;blackcompany&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ShouldBeOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>BlackCompany<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/Lamar.Testing/IoC/Acceptance/scanning_samples.cs#L89-L125" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_register-all-types-implementing" title="Start of snippet">anchor</a></sup><a id="snippet-sample_register-all-types-implementing-1"></a></p><div class="language-cs"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFantasySeries</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WheelOfTime</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IFantasySeries</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameOfThrones</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IFantasySeries</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BlackCompany</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IFantasySeries</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>\n\n<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">register_all_types_of_an_interface</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token class-name"><span class="token keyword">var</span></span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        _<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n        <span class="token punctuation">{</span>\n            x<span class="token punctuation">.</span><span class="token function">TheCallingAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddAllTypesOf</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFantasySeries<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            <span class="token comment">// or</span>\n\n            x<span class="token punctuation">.</span><span class="token function">AddAllTypesOf</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IFantasySeries</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n                <span class="token punctuation">.</span><span class="token function">NameBy</span><span class="token punctuation">(</span>type <span class="token operator">=&gt;</span> type<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    container<span class="token punctuation">.</span>Model<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">For</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFantasySeries<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span>Instances<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>ReturnedType<span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">OrderBy</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">ShouldHaveTheSameElementsAs</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">BlackCompany</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">GameOfThrones</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">WheelOfTime</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/Acceptance/scanning_samples.cs#L39-L72" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_register-all-types-implementing-1" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><div class="tip custom-block"><p class="custom-block-title">INFO</p><p><code>T</code> does not have to be an interface, it&#39;s all based on the ability to cast a concrete type to <code>T</code></p></div><h2 id="generic-types"><a class="header-anchor" href="#generic-types" aria-hidden="true">#</a> Generic Types</h2><p>See <a href="/guide/ioc/generics.html">generic types</a> for an example of using the <code>ConnectImplementationsToTypesClosing</code> mechanism for generic types.</p><h2 id="register-concrete-types-against-the-first-interface"><a class="header-anchor" href="#register-concrete-types-against-the-first-interface" aria-hidden="true">#</a> Register Concrete Types against the First Interface</h2><p>The last built in registration convention is a mechanism to register all concrete types that implement at least one interface against the first interface that they implement.</p>',10),b=t('<p><a id="snippet-sample_using-registerconcretetypesagainstthefirstinterface"></a></p><div class="language-cs"><pre><code>container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Container</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n<span class="token punctuation">{</span>\n    x<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span>o <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        o<span class="token punctuation">.</span><span class="token function">TheCallingAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        o<span class="token punctuation">.</span><span class="token function">RegisterConcreteTypesAgainstTheFirstInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        o<span class="token punctuation">.</span><span class="token function">Exclude</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span><span class="token function">CanBeCastTo</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IGateway</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/Graph/FirstInterfaceConventionTester.cs#L13-L24" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_using-registerconcretetypesagainstthefirstinterface" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p><h2 id="look-for-registries"><a class="header-anchor" href="#look-for-registries" aria-hidden="true">#</a> Look for Registries</h2><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Use some caution with this feature. Many users tried to use this feature with StructureMap just to try to break direct assembly coupling, and while it does accomplish that goal, ask yourself if the extra complexity is worth it.</p></div><p>Lamar can automatically include other registries with the<code>LookForRegistries</code> method. This functionality is <em>recursive</em>, meaning that assembly scanning declarations in the <code>ServiceRegistry</code> types discovered through <code>LookForRegistries()</code> will also be processed.</p>',6),v=t('<p><a id="snippet-sample_scan-for-registries"></a></p><div class="language-cs"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>\n<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Search_for_registries_when_explicitly_told</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token function">Scan</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>\n    <span class="token punctuation">{</span>\n        x<span class="token punctuation">.</span><span class="token function">TheCallingAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        x<span class="token punctuation">.</span><span class="token function">LookForRegistries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    TestingRegistry<span class="token punctuation">.</span>WasUsed<span class="token punctuation">.</span><span class="token function">ShouldBeTrue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p><sup><a href="https://github.com/JasperFx/lamar/blob/master/src/StructureMap.Testing/Graph/AssemblyScannerTester.cs#L229-L242" title="Snippet source file">snippet source</a> | <a href="#snippet-sample_scan-for-registries" title="Start of snippet">anchor</a></sup>\x3c!-- endSnippet --\x3e</p>',3);e.render=function(t,p,e,S,T,w){return n(),s("div",null,[o,a(" snippet: sample_BasicScanning "),c,a(" snippet: sample_scan-calling-assembly "),l,a(" snippet: sample_scan-filesystem "),i,a(" snippet: sample_scan-filesystem-for-exe "),u,a(" snippet: sample_scan-exclusions "),k,a(" snippet: sample_using-LamarIgnore "),r,a(" snippet: sample_IRegistrationConvention "),m,a(" snippet: sample_custom-registration-convention "),d,a(" snippet: sample_WithDefaultConventions "),g,a(" snippet: sample_WithDefaultConventionsOptions "),y,a(" snippet: sample_WithDefaultConventionsLifetime "),h,a(" snippet: sample_SingleImplementationsOfInterface "),f,a(" snippet: sample_register-all-types-implementing "),_,a(" snippet: sample_using-RegisterConcreteTypesAgainstTheFirstInterface "),b,a(" snippet: sample_scan-for-registries "),v])};export{p as __pageData,e as default};
