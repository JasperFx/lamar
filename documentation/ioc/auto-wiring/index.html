<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="generator" content="Bootply" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <title>Lamar - Auto Wiring</title>
        <link href="/lamar/content/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/lamar/content/prism.css" rel="stylesheet" type="text/css" />
        <link href="/lamar/content/theme.css" rel="stylesheet" type="text/css" />

        <link rel="apple-touch-icon" href="/bootstrap/img/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/bootstrap/img/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/bootstrap/img/apple-touch-icon-114x114.png">

        <link href="/lamar/content/affix.css" rel="stylesheet" type="text/css" />
    </head>

    <body>

      <a href="https://github.com/jasperfx/Lamar"><img style="z-index: 5000; position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>

      <nav class="navbar navbar-default navbar-fixed-top" role="banner">
      <div class="container">
        <div class="navbar-header">
          <a href="/lamar" class="navbar-brand">Lamar</a>
        </div>
        <nav class="collapse navbar-collapse" role="navigation">
          <ul class="nav navbar-nav pull-right">
            <li>
              <a href="/lamar/getting_started">Getting Started</a>
            </li>
            <li>
              <a href="/lamar/documentation">Documentation</a>
            </li>
            <li>
              <a href="https://gitter.im/jasperfx/Lamar?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/jasperfx/Lamar" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a>
            </li>
            <li><a href="/lamar/documentation/ioc/diagnostics" title="Diagnostics">Previous</a></li>
            <li><a href="/lamar/documentation/ioc/lambdas" title="Building Objects with Lambdas">Next</a></li>
          </ul>
          <div class="navbar-form navbar-left" role="search">
            <div class="form-group">
              <input id="search" type="search" class="form-control" placeholder="Search">
            </div>
          </div>

        </nav>

      </div>
    </nav>

    <div class="container">
      <nav class="navbar-inverse">
        <ol class="breadcrumb"><li><a href="/lamar/">Lamar</a></li><li><a href="/lamar/documentation">Documentation</a></li><li><a href="/lamar/documentation/ioc">Lamar as IoC Container</a></li><li class="active">Auto Wiring</li></ol>
      </nav>
    </div>

    <!--main-->
    <div class="container">
      <div class="row">
          <!--left-->
          <div class="col-md-3" id="leftCol">
            <h3>Lamar 3.1.0</h3>
            <br />

            <ul class="nav nav-stacked affix" id="sidebar">
            </ul>

            <h3 class="no-margin">Next</h3><p><a href="/lamar/documentation/ioc/lambdas">Building Objects with Lambdas</a></p>
            <h3 class="no-margin">Previous</h3><a href="/lamar/documentation/ioc/diagnostics">Diagnostics</a></p>
          </div><!--/left-->

          <!--right-->
          <div class="col-md-9">
              <h1>Auto Wiring</h1>

              <hr />

              <div id="main-pane">
                <!--Title: Auto Wiring-->
<!--Url: auto-wiring-->
<p>The best way to use an IoC container is to allow &quot;Auto Wiring&quot; to do most of the work for you.  IoC Containers like Lamar are an infrastructure concern, and as such, should be isolated from as much of your code as possible.  Before examining Auto Wiring in depth, let's look at a common anti pattern of IoC usage:</p>
<pre><code class="language-csharp">&#xA;// This is the wrong way to use an IoC container.  Do NOT invoke the container from&#xA;// the constructor function.  This tightly couples the ShippingScreenPresenter to&#xA;// the IoC container in a harmful way.  This class cannot be used in either&#xA;// production or testing without a valid IoC configuration.  Plus, you&#x27;re writing more&#xA;// code&#xA;public ShippingScreenPresenter(IContainer container)&#xA;{&#xA;    // It&#x27;s even worse if you use a static facade to retrieve&#xA;    // a service locator!&#xA;    _service = container.GetInstance&lt;IShippingService&gt;();&#xA;    _repository = container.GetInstance&lt;IRepository&gt;();&#xA;}&#xA;</code></pre>
<p>Instead of binding <code>ShippingScreenPresenter</code> so tightly to Lamar and having to explicitly fetch its dependencies, let's switch
it to using Lamar a little more idiomatically and just exposing a constructor function with the necessary dependencies
as arguments:</p>
<pre><code class="language-csharp">&#xA;// This is the way to write a Constructor Function with an IoC tool&#xA;// Let the IoC container &quot;inject&quot; services from outside, and keep&#xA;// ShippingScreenPresenter ignorant of the IoC infrastructure&#xA;public ShippingScreenPresenter(IShippingService service, IRepository repository)&#xA;{&#xA;    _service = service;&#xA;    _repository = repository;&#xA;}&#xA;</code></pre>
<p>As long as a Lamar <code>Container</code> knows how to resolve the <code>IRepository</code> and
<code>IShippingService</code> interfaces, Lamar can build <code>ShippingScreenPresenter</code> by using &quot;auto-wiring.&quot; All this means is that
instead of forcing you to explicitly configure all the dependencies for <code>ShippingScreenPresenter</code>, Lamar can infer from
the public <a href="/lamar/documentation/ioc/registration/constructor-selection">constructor function</a>
what dependencies <code>ShippingScreenPresenter</code> needs and uses the defaults of both to build it out.</p>
<p>Looking at the <a href="/lamar/documentation/ioc/diagnostics/build-plans">build plan</a> for <code>ShippingScreenPresenter</code>:</p>
<pre><code class="language-csharp">&#xA;[Fact]&#xA;public void ShowBuildPlan()&#xA;{&#xA;    var container = new Container(_ =&gt;&#xA;    {&#xA;        _.For&lt;IShippingService&gt;().Use&lt;InternalShippingService&gt;();&#xA;        _.For&lt;IRepository&gt;().Use&lt;SimpleRepository&gt;();&#xA;    });&#xA;&#xA;    // Just proving that we can build ShippingScreenPresenter;)&#xA;    container.GetInstance&lt;ShippingScreenPresenter&gt;().ShouldNotBeNull();&#xA;&#xA;    var buildPlan = container.Model.For&lt;ShippingScreenPresenter&gt;().Default.DescribeBuildPlan();&#xA;&#xA;    // _output is the xUnit ITestOutputHelper here&#xA;    _output.WriteLine(buildPlan);&#xA;}&#xA;</code></pre>

              </div>

              <hr />

              <nav>
                <span>
                  <strong>Previous: </strong><a href="/lamar/documentation/ioc/diagnostics">Diagnostics</a>

                </span>
                <span class="pull-right">

                  <strong>Next: </strong><a href="/lamar/documentation/ioc/lambdas">Building Objects with Lambdas</a>

                </span>
              </nav>

          </div><!--/right-->
        </div><!--/row-->
      </div><!--/container-->

    </body>


    <footer>
        <script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type='text/javascript' src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

        <script type="text/javascript" src="/lamar/content/prism.js"></script>
        <script type="text/javascript" src="/lamar/content/sidebar.js"></script>
        <script type="text/javascript" src="/lamar/content/affix.js"></script>

<script>
$('#search').keyup(function(e){
  if(e.keyCode == 13) {
    var search = $('#search').val();

    var url = 'https://www.google.com/#q=site:jasperfx.github.io ' + search;
    url = encodeURI(url);

    window.location.href = url;

    e.stopPropagation();
    if (e.cancelBubble!=null) e.cancelBubble = true;
    return false;
  }
});
</script>
    </footer>
</html>
